{
  "workspace": {
    "id": "cd9e9853-dbf5-4199-9744-d4d0211336ca",
    "name": "Shuren API Testing",
    "type": "personal",
    "description": "Comprehensive end-to-end API testing workspace for the Shuren fitness application backend"
  },
  "collection": {
    "id": "49a76669-a11d-4ee1-8b70-44b11a7bf107",
    "name": "Shuren Backend API - E2E Tests",
    "uid": "27659503-49a76669-a11d-4ee1-8b70-44b11a7bf107",
    "createdAt": "2026-02-01T14:45:48.000Z",
    "updatedAt": "2026-02-01T14:45:49.000Z",
    "owner": "27659503",
    "variables": {
      "api_version": "v1",
      "timeout_ms": "5000",
      "test_user_prefix": "test_"
    },
    "scripts": {
      "prerequest": {
        "exec": [
          "// Collection-level pre-request script",
          "// Set authentication header if JWT token exists",
          "if (pm.environment.get('jwt_token')) {",
          "    pm.request.headers.add({",
          "        key: 'Authorization',",
          "        value: 'Bearer ' + pm.environment.get('jwt_token')",
          "    });",
          "}",
          "",
          "// Set content type for JSON requests",
          "pm.request.headers.add({",
          "    key: 'Content-Type',",
          "    value: 'application/json'",
          "});",
          "",
          "// Track collection start time (only set once at the beginning)",
          "if (!pm.environment.get('collection_start_time')) {",
          "    pm.environment.set('collection_start_time', Date.now());",
          "    pm.environment.set('collection_request_count', 0);",
          "    pm.environment.set('test_users_created', JSON.stringify([]));",
          "    pm.environment.set('test_profiles_created', JSON.stringify([]));",
          "    pm.environment.set('test_chat_sessions_created', JSON.stringify([]));",
          "}"
        ]
      },
      "test": {
        "exec": [
          "// Collection-level test script - runs for ALL requests",
          "",
          "// Common validation for all requests",
          "pm.test('Response time is acceptable', function() {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has valid JSON', function() {",
          "    pm.response.to.be.json;",
          "});",
          "",
          "// Error response validation - runs for all error status codes",
          "if (pm.response.code >= 400) {",
          "    pm.test('Error response has correct structure', function() {",
          "        const jsonData = pm.response.json();",
          "        pm.expect(jsonData).to.have.property('detail');",
          "        pm.expect(jsonData).to.have.property('status_code');",
          "        pm.expect(jsonData.status_code).to.equal(pm.response.code);",
          "    });",
          "    ",
          "    // Validate errors array structure if present (for 422 validation errors)",
          "    pm.test('Error response has valid errors array structure (if present)', function() {",
          "        const jsonData = pm.response.json();",
          "        if (jsonData.errors && Array.isArray(jsonData.errors)) {",
          "            jsonData.errors.forEach(error => {",
          "                pm.expect(error).to.have.property('field');",
          "                pm.expect(error).to.have.property('message');",
          "                pm.expect(error).to.have.property('type');",
          "            });",
          "        }",
          "    });",
          "}",
          "",
          "// Track collection execution time and validate 5-minute limit",
          "const startTime = pm.environment.get('collection_start_time');",
          "if (startTime) {",
          "    const currentTime = Date.now();",
          "    const elapsedTime = currentTime - parseInt(startTime);",
          "    const requestCount = parseInt(pm.environment.get('collection_request_count') || 0) + 1;",
          "    pm.environment.set('collection_request_count', requestCount);",
          "    pm.environment.set('collection_elapsed_time', elapsedTime);",
          "    ",
          "    // Log progress every 10 requests",
          "    if (requestCount % 10 === 0) {",
          "        console.log(`Collection progress: ${requestCount} requests completed in ${elapsedTime}ms`);",
          "    }",
          "    ",
          "    // Validate collection execution time is under 5 minutes (300000ms)",
          "    pm.test('Collection execution time is under 5 minutes', function() {",
          "        pm.expect(elapsedTime).to.be.below(300000);",
          "    });",
          "}"
        ]
      }
    },
    "folders": {
      "01_authentication": {
        "id": "214abfb3-ba3c-4103-9217-6ee36cab14d5",
        "uid": "27659503-214abfb3-ba3c-4103-9217-6ee36cab14d5",
        "name": "01 - Authentication",
        "requests": {
          "register_new_user": {
            "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "name": "Register New User",
            "method": "POST",
            "url": "{{api_base}}/auth/register",
            "description": "Creates a new user with unique email and password",
            "prerequest_script": [
              "// Generate unique test email, password, and full name",
              "const timestamp = Date.now();",
              "const randomNum = Math.floor(Math.random() * 10000);",
              "const testEmail = `test_${timestamp}_${randomNum}@example.com`;",
              "pm.environment.set('test_email', testEmail);",
              "",
              "const password = `Test${randomNum}!Pass`;",
              "pm.environment.set('test_password', password);",
              "",
              "const fullName = `Test User ${randomNum}`;",
              "pm.environment.set('full_name', fullName);"
            ],
            "test_script": [
              "pm.test('Status code is 201 Created', function() {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('Response has user details', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('email');",
              "    pm.expect(jsonData).to.have.property('created_at');",
              "    pm.environment.set('user_id', jsonData.id);",
              "    ",
              "    // Track created test user for cleanup",
              "    const testUsers = JSON.parse(pm.environment.get('test_users_created') || '[]');",
              "    testUsers.push({",
              "        id: jsonData.id,",
              "        email: jsonData.email",
              "    });",
              "    pm.environment.set('test_users_created', JSON.stringify(testUsers));",
              "});"
            ]
          },
          "register_duplicate_email": {
            "id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
            "name": "Register Duplicate Email",
            "method": "POST",
            "url": "{{api_base}}/auth/register",
            "description": "Tests 400 error when registering with existing email",
            "test_script": [
              "pm.test('Status code is 400 Bad Request', function() {",
              "    pm.response.to.have.status(400);",
              "});",
              "",
              "pm.test('Error message indicates duplicate email', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail).to.include('email');",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/already|exists|registered/);",
              "});"
            ]
          },
          "login_valid_credentials": {
            "id": "c3d4e5f6-a7b8-9012-cdef-123456789012",
            "name": "Login with Valid Credentials",
            "method": "POST",
            "url": "{{api_base}}/auth/login",
            "description": "Authenticates user and extracts JWT token",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains JWT token', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('access_token');",
              "    pm.expect(jsonData.access_token).to.be.a('string');",
              "    pm.environment.set('jwt_token', jsonData.access_token);",
              "});",
              "",
              "pm.test('Response contains user details', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('user');",
              "    pm.expect(jsonData.user).to.have.property('id');",
              "    pm.expect(jsonData.user).to.have.property('email');",
              "});"
            ]
          },
          "login_invalid_credentials": {
            "id": "d4e5f6a7-b8c9-0123-def0-234567890123",
            "name": "Login with Invalid Credentials",
            "method": "POST",
            "url": "{{api_base}}/auth/login",
            "description": "Tests 401 error with wrong password",
            "test_script": [
              "pm.test('Status code is 401 Unauthorized', function() {",
              "    pm.response.to.have.status(401);",
              "});",
              "",
              "pm.test('Error message indicates authentication failure', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/invalid|incorrect|wrong|authentication|credentials/);",
              "});"
            ]
          },
          "google_oauth_login": {
            "id": "e5f6a7b8-c9d0-1234-ef01-345678901234",
            "name": "Google OAuth Login",
            "method": "POST",
            "url": "{{api_base}}/auth/oauth/google",
            "description": "Authenticates via Google OAuth and extracts JWT token",
            "prerequest_script": [
              "// Set mock OAuth token for testing",
              "pm.environment.set('oauth_token', 'mock_google_oauth_token_' + Date.now());"
            ],
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains JWT token', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('access_token');",
              "    pm.environment.set('jwt_token', jsonData.access_token);",
              "});"
            ]
          },
          "get_current_user_authenticated": {
            "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
            "name": "Get Current User (Authenticated)",
            "method": "GET",
            "url": "{{api_base}}/auth/me",
            "description": "Retrieves current user information with valid JWT token",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains user information', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('email');",
              "});"
            ]
          },
          "get_current_user_no_token": {
            "id": "a7b8c9d0-e1f2-3456-0123-567890123456",
            "name": "Get Current User (No Token)",
            "method": "GET",
            "url": "{{api_base}}/auth/me",
            "description": "Tests 401 error when accessing protected endpoint without JWT token",
            "prerequest_script": [
              "// Remove Authorization header for this request",
              "pm.request.headers.remove('Authorization');"
            ],
            "test_script": [
              "pm.test('Status code is 401 Unauthorized', function() {",
              "    pm.response.to.have.status(401);",
              "});",
              "",
              "pm.test('Error indicates missing authentication', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/not authenticated|unauthorized|token|missing/);",
              "});"
            ]
          },
          "get_current_user_expired_token": {
            "id": "b8c9d0e1-f2a3-4567-1234-678901234567",
            "name": "Get Current User (Expired Token)",
            "method": "GET",
            "url": "{{api_base}}/auth/me",
            "description": "Tests 401 error when using expired JWT token",
            "prerequest_script": [
              "// Set an expired token (this is a mock expired token)",
              "pm.request.headers.upsert({",
              "    key: 'Authorization',",
              "    value: 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyLCJleHAiOjE1MTYyMzkwMjJ9.expired'",
              "});"
            ],
            "test_script": [
              "pm.test('Status code is 401 Unauthorized', function() {",
              "    pm.response.to.have.status(401);",
              "});",
              "",
              "pm.test('Error indicates expired or invalid token', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/expired|invalid|token/);",
              "});"
            ]
          }
        }
      },
      "02_onboarding": {
        "id": "e4393ddf-8a68-41ab-8cb3-ae9e86094c52",
        "uid": "27659503-e4393ddf-8a68-41ab-8cb3-ae9e86094c52",
        "name": "02 - Onboarding"
      },
      "03_profiles": {
        "id": "e1b95eac-c3f0-430b-9fc0-7cff11aef175",
        "uid": "27659503-e1b95eac-c3f0-430b-9fc0-7cff11aef175",
        "name": "03 - Profiles",
        "requests": {
          "get_user_profile": {
            "id": "ee268ab2-03b8-cbd8-ce69-4328441d141d",
            "name": "Get User Profile",
            "method": "GET",
            "url": "{{api_base}}/profiles/me",
            "description": "Retrieves complete user profile with all relationships",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Profile has complete structure', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('user_id');",
              "    pm.expect(jsonData).to.have.property('version');",
              "    pm.expect(jsonData).to.have.property('is_locked');",
              "    pm.expect(jsonData).to.have.property('fitness_goals');",
              "    pm.expect(jsonData).to.have.property('physical_constraints');",
              "    pm.expect(jsonData).to.have.property('dietary_preferences');",
              "    pm.expect(jsonData).to.have.property('workout_schedule');",
              "    pm.expect(jsonData).to.have.property('meal_schedule');",
              "    pm.environment.set('profile_id', jsonData.id);",
              "    pm.environment.set('profile_version', jsonData.version);",
              "    pm.environment.set('profile_is_locked', jsonData.is_locked);",
              "});",
              "",
              "// Performance validation: Profile requests should respond within 100ms",
              "pm.test('Profile request response time < 100ms', function() {",
              "    pm.expect(pm.response.responseTime).to.be.below(100);",
              "});"
            ]
          },
          "get_non_existent_profile": {
            "id": "e613e96e-0296-24a3-30a8-60205993c75a",
            "name": "Get Non-Existent Profile",
            "method": "GET",
            "url": "{{api_base}}/profiles/00000000-0000-0000-0000-000000000000",
            "description": "Tests 404 error for non-existent profile",
            "test_script": [
              "pm.test('Status code is 404 Not Found', function() {",
              "    pm.response.to.have.status(404);",
              "});",
              "",
              "pm.test('Error message indicates resource not found', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/not found|does not exist|profile/);",
              "});"
            ]
          },
          "update_profile_valid": {
            "id": "154cc4ae-66fd-c56f-022c-692a99490396",
            "name": "Update Profile (Valid Data)",
            "method": "PATCH",
            "url": "{{api_base}}/profiles/me",
            "description": "Updates profile with valid data and verifies version increment",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Updating fitness goals\",\n  \"updates\": {\n    \"fitness_level\": \"intermediate\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Profile has complete structure', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('user_id');",
              "    pm.expect(jsonData).to.have.property('is_locked');",
              "    pm.expect(jsonData).to.have.property('fitness_level');",
              "});",
              "",
              "pm.test('Updated data is reflected', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.fitness_level).to.equal('intermediate');",
              "});"
            ]
          },
          "update_profile_invalid": {
            "id": "bb9816dc-4816-90ef-8808-3e31b14902b7",
            "name": "Update Profile (Invalid Data)",
            "method": "PATCH",
            "url": "{{api_base}}/profiles/me",
            "description": "Tests validation errors with invalid profile data",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Testing invalid data\",\n  \"updates\": {\n    \"fitness_level\": \"invalid_level\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 422 Unprocessable Entity', function() {",
              "    pm.response.to.have.status(422);",
              "});",
              "",
              "pm.test('Response contains error detail', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('detail');",
              "});"
            ]
          },
          "lock_profile": {
            "id": "a467250b-561f-cc25-dfec-bfa8f9abe331",
            "name": "Lock Profile",
            "method": "POST",
            "url": "{{api_base}}/profiles/me/lock",
            "description": "Locks profile to prevent further updates",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Profile is locked', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.is_locked).to.be.true;",
              "    pm.environment.set('profile_is_locked', true);",
              "});"
            ]
          },
          "update_locked_profile": {
            "id": "cc049317-25f6-771d-b506-a86cb16de555",
            "name": "Update Locked Profile",
            "method": "PATCH",
            "url": "{{api_base}}/profiles/me",
            "description": "Tests 403 error when updating locked profile",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reason\": \"Attempting to update locked profile\",\n  \"updates\": {\n    \"fitness_level\": \"advanced\"\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 403 Forbidden', function() {",
              "    pm.response.to.have.status(403);",
              "});",
              "",
              "pm.test('Error message indicates profile is locked', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/locked|forbidden/);",
              "});"
            ]
          }
        }
      },
      "04_workouts": {
        "id": "e1144d4d-c032-4ab9-a985-0475d5f685db",
        "uid": "27659503-e1144d4d-c032-4ab9-a985-0475d5f685db",
        "name": "04 - Workouts",
        "requests": {
          "get_complete_workout_plan": {
            "id": "8333aaac-e634-24fb-9231-0fa4d8460f3a",
            "name": "Get Complete Workout Plan",
            "method": "GET",
            "url": "{{api_base}}/workouts/plan",
            "description": "Retrieves complete workout plan with all workout days and exercises",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Workout plan has all days with exercises', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('workout_days');",
              "    pm.expect(jsonData.workout_days).to.be.an('array');",
              "    pm.expect(jsonData.workout_days.length).to.be.greaterThan(0);",
              "});",
              "",
              "// Performance validation: Workout plan requests should respond within 150ms",
              "pm.test('Workout plan request response time < 150ms', function() {",
              "    pm.expect(pm.response.responseTime).to.be.below(150);",
              "});"
            ]
          },
          "get_specific_workout_day": {
            "id": "8758c7df-0ce5-520b-ac93-917e7ff6a95f",
            "name": "Get Specific Workout Day",
            "method": "GET",
            "url": "{{api_base}}/workouts/plan/day/1",
            "description": "Retrieves exercises for a specific workout day",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains single day data', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('day_number');",
              "    pm.expect(jsonData).to.have.property('exercises');",
              "});"
            ]
          },
          "get_todays_workout": {
            "id": "2b078765-216b-86f7-1002-df38cb6d3e18",
            "name": "Get Today's Workout",
            "method": "GET",
            "url": "{{api_base}}/workouts/today",
            "description": "Retrieves workout for the current day of the week",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Workout matches current day', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('day_name');",
              "    pm.expect(jsonData).to.have.property('exercises');",
              "});"
            ]
          },
          "get_weeks_workouts": {
            "id": "4e065478-af8f-cf72-9be4-d7f79bfa87f5",
            "name": "Get Week's Workouts",
            "method": "GET",
            "url": "{{api_base}}/workouts/week",
            "description": "Retrieves all workouts for the week (7 days)",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains 7 days of workouts', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an('array');",
              "    pm.expect(jsonData.length).to.equal(7);",
              "});"
            ]
          },
          "update_workout_plan": {
            "id": "841eb33f-120d-e795-caae-a7ce412f5390",
            "name": "Update Workout Plan",
            "method": "PATCH",
            "url": "{{api_base}}/workouts/plan",
            "description": "Updates workout plan with new duration or settings",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"duration_weeks\": 16,\n  \"days_per_week\": 5\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Updated plan is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('duration_weeks');",
              "    pm.expect(jsonData.duration_weeks).to.equal(16);",
              "});"
            ]
          },
          "get_workout_schedule": {
            "id": "7954c632-94b2-f72f-e5d4-2adf352af1bb",
            "name": "Get Workout Schedule",
            "method": "GET",
            "url": "{{api_base}}/workouts/schedule",
            "description": "Retrieves workout schedule with scheduled days and times",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Schedule has days and times', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('days');",
              "    pm.expect(jsonData).to.have.property('preferred_time');",
              "});"
            ]
          },
          "update_workout_schedule": {
            "id": "dcf2cbe1-7536-60e1-642e-14b10c9e4d70",
            "name": "Update Workout Schedule",
            "method": "PATCH",
            "url": "{{api_base}}/workouts/schedule",
            "description": "Updates workout schedule with new days and preferred time",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"schedules\": [\n    {\n      \"day_of_week\": 1,\n      \"scheduled_time\": \"07:00:00\",\n      \"enable_notifications\": true\n    },\n    {\n      \"day_of_week\": 3,\n      \"scheduled_time\": \"07:00:00\",\n      \"enable_notifications\": true\n    },\n    {\n      \"day_of_week\": 5,\n      \"scheduled_time\": \"07:00:00\",\n      \"enable_notifications\": true\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Updated schedule is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an('array');",
              "    pm.expect(jsonData.length).to.be.greaterThan(0);",
              "    jsonData.forEach(schedule => {",
              "        pm.expect(schedule).to.have.property('day_of_week');",
              "        pm.expect(schedule).to.have.property('scheduled_time');",
              "    });",
              "});"
            ]
          },
          "get_workout_without_profile": {
            "id": "fa9397e5-e6bd-37b6-8112-5c80498ee5e9",
            "name": "Get Workout Without Profile",
            "method": "GET",
            "url": "{{api_base}}/workouts/plan",
            "description": "Tests 404 error when requesting workout for user without profile",
            "prerequest_script": [
              "// This request should be made with a user that has no profile",
              "// In a real test, you would create a new user without completing onboarding"
            ],
            "test_script": [
              "pm.test('Status code is 404 Not Found', function() {",
              "    pm.response.to.have.status(404);",
              "});",
              "",
              "pm.test('Error indicates missing profile or workout plan', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/not found|profile|workout plan/);",
              "});"
            ]
          }
        }
      },
      "05_meals": {
        "id": "4bde369a-79cc-4304-a985-76bbd91eb972",
        "uid": "27659503-4bde369a-79cc-4304-a985-76bbd91eb972",
        "name": "05 - Meals",
        "requests": {
          "get_meal_plan": {
            "id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
            "name": "Get Meal Plan",
            "method": "GET",
            "url": "{{api_base}}/meals/plan",
            "description": "Retrieves complete meal plan with nutritional targets",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Meal plan has nutritional targets', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('daily_calories_target');",
              "    pm.expect(jsonData).to.have.property('protein_grams_target');",
              "    pm.expect(jsonData).to.have.property('carbs_grams_target');",
              "    pm.expect(jsonData).to.have.property('fats_grams_target');",
              "    pm.environment.set('meal_plan_id', jsonData.id);",
              "});",
              "",
              "pm.test('Meal plan response time < 100ms', function() {",
              "    pm.expect(pm.response.responseTime).to.be.below(100);",
              "});"
            ]
          },
          "update_meal_plan": {
            "id": "b2c3d4e5-f6a7-8901-bcde-f12345678901",
            "name": "Update Meal Plan",
            "method": "PATCH",
            "url": "{{api_base}}/meals/plan",
            "description": "Updates meal plan with new nutritional targets",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"daily_calories_target\": 2800,\n  \"protein_grams_target\": 200.0,\n  \"carbs_grams_target\": 300.0,\n  \"fats_grams_target\": 80.0\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Updated meal plan is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('daily_calories_target');",
              "    pm.expect(jsonData.daily_calories_target).to.equal(2800);",
              "});"
            ]
          },
          "get_meal_schedule": {
            "id": "c3d4e5f6-a7b8-9012-cdef-123456789012",
            "name": "Get Meal Schedule",
            "method": "GET",
            "url": "{{api_base}}/meals/schedule",
            "description": "Retrieves meal schedule with timing for all meals",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Meal schedule has meals array', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('meals');",
              "    pm.expect(jsonData.meals).to.be.an('array');",
              "});",
              "",
              "pm.test('Each meal has required fields', function() {",
              "    const jsonData = pm.response.json();",
              "    if (jsonData.meals && jsonData.meals.length > 0) {",
              "        jsonData.meals.forEach(meal => {",
              "            pm.expect(meal).to.have.property('meal_name');",
              "            pm.expect(meal).to.have.property('scheduled_time');",
              "            pm.expect(meal).to.have.property('enable_notifications');",
              "        });",
              "    }",
              "});"
            ]
          },
          "update_meal_schedule": {
            "id": "d4e5f6a7-b8c9-0123-def0-234567890123",
            "name": "Update Meal Schedule",
            "method": "PATCH",
            "url": "{{api_base}}/meals/schedule",
            "description": "Updates meal schedule with new timing",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"meals\": [\n    {\n      \"meal_name\": \"Breakfast\",\n      \"scheduled_time\": \"08:00:00\",\n      \"enable_notifications\": true\n    },\n    {\n      \"meal_name\": \"Lunch\",\n      \"scheduled_time\": \"13:00:00\",\n      \"enable_notifications\": true\n    },\n    {\n      \"meal_name\": \"Dinner\",\n      \"scheduled_time\": \"19:00:00\",\n      \"enable_notifications\": true\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Updated schedule is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('meals');",
              "    pm.expect(jsonData.meals).to.be.an('array');",
              "});"
            ]
          },
          "get_todays_meals": {
            "id": "e5f6a7b8-c9d0-1234-ef01-345678901234",
            "name": "Get Today's Meals",
            "method": "GET",
            "url": "{{api_base}}/meals/today",
            "description": "Retrieves meals scheduled for today",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response is an array of meals', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.be.an('array');",
              "});",
              "",
              "pm.test('Each meal has timing information', function() {",
              "    const jsonData = pm.response.json();",
              "    if (jsonData.length > 0) {",
              "        jsonData.forEach(meal => {",
              "            pm.expect(meal).to.have.property('meal_name');",
              "            pm.expect(meal).to.have.property('scheduled_time');",
              "        });",
              "    }",
              "});"
            ]
          },
          "get_next_meal": {
            "id": "f6a7b8c9-d0e1-2345-f012-456789012345",
            "name": "Get Next Meal",
            "method": "GET",
            "url": "{{api_base}}/meals/next",
            "description": "Retrieves next upcoming meal based on current time",
            "test_script": [
              "pm.test('Status code is 200 OK or 404 Not Found', function() {",
              "    pm.expect(pm.response.code).to.be.oneOf([200, 404]);",
              "});",
              "",
              "if (pm.response.code === 200) {",
              "    pm.test('Next meal has required fields', function() {",
              "        const jsonData = pm.response.json();",
              "        pm.expect(jsonData).to.have.property('meal_name');",
              "        pm.expect(jsonData).to.have.property('scheduled_time');",
              "    });",
              "}",
              "",
              "if (pm.response.code === 404) {",
              "    pm.test('404 indicates no more meals today', function() {",
              "        const jsonData = pm.response.json();",
              "        pm.expect(jsonData.detail.toLowerCase()).to.match(/no more meals|not found/);",
              "    });",
              "}"
            ]
          }
        }
      },
      "06_dishes": {
        "id": "ae53e93e-65fe-4c08-bf70-da1ec343902a",
        "uid": "27659503-ae53e93e-65fe-4c08-bf70-da1ec343902a",
        "name": "06 - Dishes"
      },
      "07_meal_templates": {
        "id": "8b660bc3-a49c-4768-92e7-30a98e021534",
        "uid": "27659503-8b660bc3-a49c-4768-92e7-30a98e021534",
        "name": "07 - Meal Templates",
        "requests": {
          "get_todays_meal_template": {
            "id": "efc43a36-2ecb-c40f-d83a-e7f51f15b387",
            "name": "Get Today's Meal Template",
            "method": "GET",
            "url": "{{api_base}}/meal-templates/today",
            "description": "Retrieves today's meal template with dish recommendations for current date",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Meal template has meals with dishes', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('date');",
              "    pm.expect(jsonData).to.have.property('meals');",
              "    pm.expect(jsonData.meals).to.be.an('array');",
              "});",
              "",
              "pm.test('Recommended dishes respect dietary preferences', function() {",
              "    const jsonData = pm.response.json();",
              "    const userDietType = pm.environment.get('user_diet_type');",
              "    if (userDietType && jsonData.meals) {",
              "        jsonData.meals.forEach(meal => {",
              "            if (meal.recommended_dishes) {",
              "                meal.recommended_dishes.forEach(dish => {",
              "                    pm.expect(dish.diet_types).to.include(userDietType);",
              "                });",
              "            }",
              "        });",
              "    }",
              "});",
              "",
              "pm.test('Dishes match meal type', function() {",
              "    const jsonData = pm.response.json();",
              "    if (jsonData.meals) {",
              "        jsonData.meals.forEach(meal => {",
              "            if (meal.recommended_dishes) {",
              "                meal.recommended_dishes.forEach(dish => {",
              "                    pm.expect(dish.meal_type).to.equal(meal.meal_type);",
              "                });",
              "            }",
              "        });",
              "    }",
              "});",
              "",
              "// Performance validation: Meal template requests should respond within 300ms",
              "pm.test('Meal template request response time < 300ms', function() {",
              "    pm.expect(pm.response.responseTime).to.be.below(300);",
              "});"
            ]
          },
          "get_next_meal_template": {
            "id": "b20f8797-fa22-570a-0611-7710fdc45020",
            "name": "Get Next Meal Template",
            "method": "GET",
            "url": "{{api_base}}/meal-templates/next",
            "description": "Retrieves next upcoming meal with dish recommendations",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Next meal has time and dishes', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('meal_type');",
              "    pm.expect(jsonData).to.have.property('time');",
              "    pm.expect(jsonData).to.have.property('recommended_dishes');",
              "});"
            ]
          },
          "get_weeks_meal_template": {
            "id": "b69bc07e-66a4-aeda-f1ad-48430c0a8034",
            "name": "Get Week's Meal Template",
            "method": "GET",
            "url": "{{api_base}}/meal-templates/week",
            "description": "Retrieves meal template for the entire week (7 days)",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains 7 days of meals', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('days');",
              "    pm.expect(jsonData.days).to.be.an('array');",
              "    pm.expect(jsonData.days.length).to.equal(7);",
              "});"
            ]
          },
          "regenerate_meal_template": {
            "id": "21eef327-95d7-079d-b198-758817e3519f",
            "name": "Regenerate Meal Template",
            "method": "POST",
            "url": "{{api_base}}/meal-templates/template/regenerate",
            "description": "Regenerates meal template with new dish recommendations and optional preferences",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"preferences\": \"More variety in protein sources, include quick prep meals\",\n  \"week_number\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "test_script": [
              "pm.test('Status code is 201 Created', function() {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('New template is created with complete structure', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('id');",
              "    pm.expect(jsonData).to.have.property('week_number');",
              "    pm.expect(jsonData).to.have.property('is_active');",
              "    pm.expect(jsonData).to.have.property('days');",
              "    pm.environment.set('meal_template_id', jsonData.id);",
              "});",
              "",
              "pm.test('Template has 7 days of meals', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.days).to.be.an('array');",
              "    pm.expect(jsonData.days.length).to.equal(7);",
              "});",
              "",
              "pm.test('Each day has meals with dishes', function() {",
              "    const jsonData = pm.response.json();",
              "    jsonData.days.forEach(day => {",
              "        pm.expect(day).to.have.property('day_of_week');",
              "        pm.expect(day).to.have.property('meals');",
              "        pm.expect(day.meals).to.be.an('array');",
              "    });",
              "});"
            ]
          },
          "get_meal_template_without_plan": {
            "id": "acecb61d-4e55-7a37-243a-339df0a9719b",
            "name": "Get Meal Template Without Plan",
            "method": "GET",
            "url": "{{api_base}}/meal-templates/today",
            "description": "Tests 404 error when requesting meal template for user without meal plan",
            "prerequest_script": [
              "// This request should be made with a user that has no meal plan",
              "// In a real test, you would create a new user without completing onboarding"
            ],
            "test_script": [
              "pm.test('Status code is 404 Not Found', function() {",
              "    pm.response.to.have.status(404);",
              "});",
              "",
              "pm.test('Error indicates missing meal plan or template', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/not found|meal plan|meal template/);",
              "});"
            ]
          }
        }
      },
      "08_shopping_list": {
        "id": "7256efe1-718a-4388-9e8f-686e3e4d2ae8",
        "uid": "27659503-7256efe1-718a-4388-9e8f-686e3e4d2ae8",
        "name": "08 - Shopping List"
      },
      "09_chat": {
        "id": "c9fddfa5-e06c-4bce-9524-373065abe325",
        "uid": "27659503-c9fddfa5-e06c-4bce-9524-373065abe325",
        "name": "09 - Chat",
        "requests": {
          "start_chat_session": {
            "id": "59afbb5c-638a-ec46-9c5c-0bc9c80346cf",
            "name": "Start Chat Session",
            "method": "POST",
            "url": "{{api_base}}/chat/session/start",
            "description": "Creates a new chat session and extracts session_id to environment",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Session ID is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('session_id');",
              "    pm.expect(jsonData.session_id).to.be.a('string');",
              "    pm.environment.set('chat_session_id', jsonData.session_id);",
              "    ",
              "    // Track created test chat session for cleanup",
              "    const testChatSessions = JSON.parse(pm.environment.get('test_chat_sessions_created') || '[]');",
              "    testChatSessions.push({",
              "        id: jsonData.session_id,",
              "        user_id: pm.environment.get('user_id')",
              "    });",
              "    pm.environment.set('test_chat_sessions_created', JSON.stringify(testChatSessions));",
              "});",
              "",
              "pm.test('Session is active', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.is_active).to.be.true;",
              "});"
            ]
          },
          "end_chat_session": {
            "id": "d7d827d5-08e5-de11-e1eb-9065d5cb002f",
            "name": "End Chat Session",
            "method": "DELETE",
            "url": "{{api_base}}/chat/session/{{chat_session_id}}",
            "description": "Ends an active chat session and validates session marked inactive",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Session is marked inactive', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.is_active).to.be.false;",
              "});"
            ]
          },
          "send_chat_message": {
            "id": "eb5a3830-a783-fab6-110b-c84ef6445b93",
            "name": "Send Chat Message",
            "method": "POST",
            "url": "{{api_base}}/chat/message",
            "description": "Sends a chat message to AI agent and validates response",
            "prerequest_script": [
              "// Generate chat message payload",
              "const chatMessage = {",
              "    session_id: pm.environment.get('chat_session_id'),",
              "    message: 'What should I eat for lunch today?',",
              "    timestamp: new Date().toISOString()",
              "};",
              "pm.environment.set('chat_message', JSON.stringify(chatMessage));"
            ],
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Agent response is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('message_id');",
              "    pm.expect(jsonData).to.have.property('role');",
              "    pm.expect(jsonData).to.have.property('content');",
              "    pm.expect(jsonData.role).to.equal('assistant');",
              "    pm.expect(jsonData.content).to.be.a('string');",
              "    pm.expect(jsonData.content.length).to.be.greaterThan(0);",
              "});"
            ]
          },
          "send_chat_message_unauthenticated": {
            "id": "1209ebb4-af91-788c-b536-f461aaf60de8",
            "name": "Send Chat Message (Unauthenticated)",
            "method": "POST",
            "url": "{{api_base}}/chat/message",
            "description": "Tests 401 error when sending chat message without JWT token",
            "prerequest_script": [
              "// Remove Authorization header for this request",
              "pm.request.headers.remove('Authorization');",
              "",
              "// Generate chat message payload",
              "const chatMessage = {",
              "    session_id: pm.environment.get('chat_session_id'),",
              "    message: 'This should fail without authentication',",
              "    timestamp: new Date().toISOString()",
              "};",
              "pm.environment.set('unauthenticated_chat_message', JSON.stringify(chatMessage));"
            ],
            "test_script": [
              "pm.test('Status code is 401 Unauthorized', function() {",
              "    pm.response.to.have.status(401);",
              "});",
              "",
              "pm.test('Error indicates authentication required', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData.detail.toLowerCase()).to.match(/not authenticated|unauthorized|token|authentication/);",
              "});"
            ]
          },
          "get_chat_history": {
            "id": "0d965b42-18c8-f0d8-654a-8f794834f043",
            "name": "Get Chat History",
            "method": "GET",
            "url": "{{api_base}}/chat/history?session_id={{chat_session_id}}&limit=50&offset=0",
            "description": "Retrieves chat history with pagination for a specific session",
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Chat history is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('messages');",
              "    pm.expect(jsonData.messages).to.be.an('array');",
              "});",
              "",
              "pm.test('Pagination metadata is present', function() {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('total');",
              "    pm.expect(jsonData).to.have.property('limit');",
              "    pm.expect(jsonData).to.have.property('offset');",
              "});"
            ]
          },
          "get_chat_history_with_pagination": {
            "id": "fc49443c-9d2c-6136-efe6-8bc9fa2ee200",
            "name": "Get Chat History with Pagination",
            "method": "GET",
            "url": "{{api_base}}/chat/history?session_id={{chat_session_id}}&limit={{history_limit}}&offset={{history_offset}}",
            "description": "Tests pagination by retrieving a specific page of chat messages",
            "prerequest_script": [
              "// Set pagination parameters",
              "pm.environment.set('history_limit', 10);",
              "pm.environment.set('history_offset', 0);"
            ],
            "test_script": [
              "pm.test('Status code is 200 OK', function() {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Correct page of messages is returned', function() {",
              "    const jsonData = pm.response.json();",
              "    const limit = parseInt(pm.environment.get('history_limit'));",
              "    pm.expect(jsonData.messages.length).to.be.at.most(limit);",
              "});",
              "",
              "pm.test('Pagination values match request', function() {",
              "    const jsonData = pm.response.json();",
              "    const requestedLimit = parseInt(pm.environment.get('history_limit'));",
              "    const requestedOffset = parseInt(pm.environment.get('history_offset'));",
              "    pm.expect(jsonData.limit).to.equal(requestedLimit);",
              "    pm.expect(jsonData.offset).to.equal(requestedOffset);",
              "});"
            ]
          }
        }
      }
    }
  },
  "environments": {
    "development": {
      "id": "7a4f8c52-37e6-4b0d-9f24-5cb55ba39f92",
      "name": "Development",
      "uid": "27659503-7a4f8c52-37e6-4b0d-9f24-5cb55ba39f92",
      "base_url": "http://localhost:8000"
    },
    "staging": {
      "id": "e229b9f4-0677-47a0-a510-e2a3bd4f0038",
      "name": "Staging",
      "uid": "27659503-e229b9f4-0677-47a0-a510-e2a3bd4f0038",
      "base_url": "https://staging-api.shuren.app"
    },
    "production": {
      "id": "cb36c84e-0e96-4052-a648-4f982f2c46d0",
      "name": "Production",
      "uid": "27659503-cb36c84e-0e96-4052-a648-4f982f2c46d0",
      "base_url": "https://api.shuren.app"
    }
  },
  "variables": {
    "base_url": "Base URL for the API server",
    "api_base": "Full API base path ({{base_url}}/api/v1)",
    "jwt_token": "JWT authentication token (secret)",
    "user_id": "Current test user ID",
    "test_email": "Test user email address",
    "full_name": "Test user full name",
    "test_password": "Test user password (secret)",
    "profile_id": "User profile ID",
    "profile_version": "Current profile version number",
    "profile_is_locked": "Profile lock status (true/false)",
    "invalid_user_id": "Invalid user ID for testing 404 errors",
    "onboarding_step": "Current onboarding step number",
    "workout_plan_id": "Workout plan ID",
    "workout_update_payload": "Generated workout plan update payload",
    "meal_plan_id": "Meal plan ID",
    "meal_template_id": "Meal template ID",
    "chat_session_id": "Chat session ID",
    "chat_message": "Generated chat message for testing",
    "history_limit": "Pagination limit for chat history (default: 10)",
    "history_offset": "Pagination offset for chat history (default: 0)",
    "dish_id": "Dish ID for testing",
    "user_diet_type": "User's dietary preference type (e.g., vegetarian, vegan, balanced)",
    "excluded_ingredients": "JSON array or comma-separated list of ingredients to exclude"
  },
  "schema_validation_added": {
    "note": "Schema validation test scripts have been added to key successful requests",
    "requests_with_schema_validation": [
      "Get User Profile (03 - Profiles)",
      "Update Profile Valid Data (03 - Profiles)",
      "Get Complete Workout Plan (04 - Workouts)",
      "Get Today's Meal Template (07 - Meal Templates)",
      "Start Chat Session (09 - Chat)"
    ]
  },
  "data_validation_tests": {
    "note": "Data validation tests have been implemented in task 12",
    "validation_error_tests": [
      "Request with Missing Required Fields",
      "Request with Invalid Data Types",
      "Request with Out-of-Range Values",
      "Request with Invalid String Patterns",
      "Request with Invalid Enum Values"
    ],
    "date_time_validation": "Date/Time Format Validation Test - validates ISO 8601 format for all date/time fields"
  },
  "error_handling_tests": {
    "note": "Comprehensive error handling tests implemented in task 13",
    "collection_level_error_validation": "All error responses validate structure (detail, status_code, errors)",
    "error_types_tested": {
      "401_authentication_errors": [
        "Send Chat Message (Unauthenticated)",
        "Get Current User (No Token)",
        "Get Current User (Expired Token)"
      ],
      "403_authorization_errors": [
        "Update Locked Profile"
      ],
      "404_not_found_errors": [
        "Get Non-Existent Profile",
        "Get Non-Existent Dish",
        "Get Workout Without Profile",
        "Get Meal Plan Without Profile",
        "Get Meal Template Without Plan",
        "Get Shopping List Without Template"
      ],
      "422_validation_errors": [
        "Register Duplicate Email",
        "Login with Invalid Credentials",
        "Submit Invalid Step",
        "Submit Step with Wrong Data Types",
        "Update Profile (Invalid Data)",
        "Request with Missing Required Fields",
        "Request with Invalid Data Types",
        "Request with Out-of-Range Values",
        "Request with Invalid String Patterns",
        "Request with Invalid Enum Values"
      ],
      "500_server_errors": "Tested when applicable - database failures, unhandled exceptions",
      "503_service_unavailable": "Tested when applicable - database connection failures, external service timeouts"
    },
    "error_response_schema": {
      "required_fields": ["detail", "status_code"],
      "optional_fields": ["errors"],
      "errors_structure": "Array of objects with field, message, and type properties"
    },
    "testing_500_and_503_errors": {
      "note": "500 and 503 errors are difficult to test in a controlled environment",
      "approach": "These errors are validated by the collection-level test script when they occur",
      "500_scenarios": [
        "Unhandled exceptions in application code",
        "Database query failures (syntax errors, constraint violations)",
        "External service failures (AI API errors, third-party service failures)"
      ],
      "503_scenarios": [
        "Database connection pool exhausted",
        "Redis connection failures",
        "External API timeouts or unavailability"
      ],
      "manual_testing": "To test these scenarios manually, you can temporarily disable database connections or external services",
      "collection_level_validation": "The collection-level test script automatically validates error structure for any 4xx or 5xx response"
    }
  },
  "performance_validation_tests": {
    "note": "Performance validation tests have been implemented in task 15",
    "performance_targets": {
      "profile_requests": "< 100ms",
      "onboarding_step_saves": "< 200ms",
      "workout_plan_requests": "< 150ms",
      "meal_template_requests": "< 300ms",
      "shopping_list_requests": "< 200ms",
      "full_collection_run": "< 5 minutes (300000ms)"
    },
    "requests_with_performance_validation": [
      "Get User Profile (03 - Profiles) - validates response time < 100ms",
      "Get Complete Workout Plan (04 - Workouts) - validates response time < 150ms",
      "Get Today's Meal Template (07 - Meal Templates) - validates response time < 300ms"
    ],
    "pending_performance_validation": [
      "Onboarding step submission requests - will validate response time < 200ms when implemented",
      "Shopping list requests - will validate response time < 200ms when implemented"
    ],
    "collection_runner_configuration": {
      "note": "Collection runner is configured to track total execution time and validate 5-minute limit",
      "timeout_per_request": "5000ms (configured in collection variables)",
      "full_collection_timeout": "300000ms (5 minutes)",
      "tracking_mechanism": "Collection-level pre-request script sets collection_start_time on first request",
      "validation_mechanism": "Collection-level test script validates elapsed time < 300000ms on every request",
      "progress_logging": "Logs progress every 10 requests with elapsed time",
      "environment_variables_used": [
        "collection_start_time - timestamp when collection execution started",
        "collection_request_count - number of requests completed",
        "collection_elapsed_time - total elapsed time in milliseconds"
      ],
      "how_it_works": [
        "1. First request sets collection_start_time environment variable",
        "2. Each request increments collection_request_count",
        "3. Each request calculates elapsed time and stores in collection_elapsed_time",
        "4. Each request validates elapsed time is under 5 minutes (300000ms)",
        "5. Progress is logged to console every 10 requests",
        "6. If any request exceeds 5-minute mark, the test fails"
      ]
    }
  }
}
